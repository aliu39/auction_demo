{"version":3,"sources":["App.js","reportWebVitals.js","index.js","components/Myerson.js"],"names":["App","props","state","id","Myerson","React","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","Canvas","Ctx","Width","Height","MaxX","MinX","MaxY","MinY","XC","x","YC","y","Draw","F","v","i","getContext","clearRect","DrawAxes","RenderFunction","Shade","console","log","XTickDelta","YTickDelta","save","lineWidth","beginPath","moveTo","lineTo","stroke","delta","restore","f","XSTEP","first","row","Math","floor","col","b","fillStyle","limit","min","globalCompositeOperation","fill","derivative","dz","P","sum","dxdz","z","DrawPayment","handleChange","event","setState","formValue","target","value","handleSubmit","n","Number","NaN","draw","preventDefault","X","eval","refs","function_code","canvases","length","width","height","plot","toString","this","canvas1","canvas2","canvas3","canvas4","canvas5","canvas6","canvas7","canvas8","canvas9","ref","rows","cols","onSubmit","style","margin","type","marginLeft","marginRight","onChange","className"],"mappings":"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","file":"static/js/main.fb967bf2.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport Myerson from \"./components/Myerson\";\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <div id=\"output\">\n        <header></header>\n        <div id=\"myerson\">\n          <Myerson />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// SAMPLE ALLOCATION RULES:\n\n// SINGLE-ITEM AUCTION (VICKREY)\n// (b) => {\n//   var B = 4;\n//   return (b > B ? 1 : 0);\n// };\n\n// SPONSORED SEARCH (PIECE-WISE ALLOCATION)\n// (b) => {\n//   var xs = [2, 3, 7, 10]; //values of x representing piece-wise portions\n//   var bs = [1, 4, 6, 9]; //increasing values of b at which x changes\n//   var idx = -1;\n//   for (var i in bs) {\n//     if (b > bs[i]) {\n//       idx++;\n//     }\n//   }\n//   if (idx < 0) {\n//     return 0;\n//   } else {\n//     return xs[idx];\n//   }\n// };\n\nimport React from \"react\";\n\n/* HELPERS */\n/* http://matt.might.net/articles/rendering-mathematical-functions-in-javascript-with-canvas-html/ */\n\n/* Canvas and context objects */\n\nvar Canvas;\nvar Ctx;\n\nvar Width;\nvar Height;\n\n// Returns the right boundary of the logical viewport:\nvar MaxX = 10;\n\n// Returns the left boundary of the logical viewport:\nvar MinX = 0;\n\n// Returns the top boundary of the logical viewport:\nvar MaxY = 10;\n\n// Returns the bottom boundary of the logical viewport:\nvar MinY = 0;\n\n// Returns the physical x-coordinate of a logical x-coordinate:\nfunction XC(x) {\n  return ((x - MinX) / (MaxX - MinX)) * Width;\n}\n\n// Returns the physical y-coordinate of a logical y-coordinate:\nfunction YC(y) {\n  return Height - ((y - MinY) / (MaxY - MinY)) * Height;\n}\n\n/* Rendering functions */\n\n// Clears the canvas, draws the axes.\nfunction Draw(F, v, i) {\n  if (Canvas.getContext) {\n    // Set up the canvas:\n    Ctx = Canvas.getContext(\"2d\");\n    Ctx.clearRect(0, 0, Width, Height);\n\n    // Adjust MaxY\n    MaxY = F(MaxX);\n    if (MaxY > MaxX * 20) {\n      MaxX = 5;\n      MaxY = F(MaxX);\n    }\n\n    // Draw:\n    DrawAxes();\n    RenderFunction(F);\n    Shade(F, v, i);\n  } else {\n    console.log(\"ERROR NO CONTEXT\");\n    // Do nothing.\n  }\n  MaxX = 10;\n}\n\n// Returns the distance between ticks on the X axis:\nfunction XTickDelta() {\n  return 1;\n}\n\n// Returns the distance between ticks on the Y axis:\nfunction YTickDelta() {\n  return 1;\n}\n\n// DrawAxes draws the X ad Y axes, with tick marks.\nfunction DrawAxes() {\n  Ctx.save();\n  Ctx.lineWidth = 2;\n  // +Y axis\n  Ctx.beginPath();\n  Ctx.moveTo(XC(0), YC(0));\n  Ctx.lineTo(XC(0), YC(MaxY));\n  Ctx.stroke();\n\n  // -Y axis\n  Ctx.beginPath();\n  Ctx.moveTo(XC(0), YC(0));\n  Ctx.lineTo(XC(0), YC(MinY));\n  Ctx.stroke();\n\n  // Y axis tick marks\n  var delta = YTickDelta();\n  for (var i = 1; i * delta < MaxY; ++i) {\n    Ctx.beginPath();\n    Ctx.moveTo(XC(0) - 5, YC(i * delta));\n    Ctx.lineTo(XC(0) + 5, YC(i * delta));\n    Ctx.stroke();\n  }\n\n  var delta = YTickDelta();\n  for (var i = 1; i * delta > MinY; --i) {\n    Ctx.beginPath();\n    Ctx.moveTo(XC(0) - 5, YC(i * delta));\n    Ctx.lineTo(XC(0) + 5, YC(i * delta));\n    Ctx.stroke();\n  }\n\n  // +X axis\n  Ctx.beginPath();\n  Ctx.moveTo(XC(0), YC(0));\n  Ctx.lineTo(XC(MaxX), YC(0));\n  Ctx.stroke();\n\n  // -X axis\n  Ctx.beginPath();\n  Ctx.moveTo(XC(0), YC(0));\n  Ctx.lineTo(XC(MinX), YC(0));\n  Ctx.stroke();\n\n  // X tick marks\n  var delta = XTickDelta();\n  for (var i = 1; i * delta < MaxX; ++i) {\n    Ctx.beginPath();\n    Ctx.moveTo(XC(i * delta), YC(0) - 5);\n    Ctx.lineTo(XC(i * delta), YC(0) + 5);\n    Ctx.stroke();\n  }\n\n  var delta = XTickDelta();\n  for (var i = 1; i * delta > MinX; --i) {\n    Ctx.beginPath();\n    Ctx.moveTo(XC(i * delta), YC(0) - 5);\n    Ctx.lineTo(XC(i * delta), YC(0) + 5);\n    Ctx.stroke();\n  }\n  Ctx.restore();\n}\n\n// RenderFunction(f) renders the input funtion f on the canvas.\nfunction RenderFunction(f) {\n  // When rendering, XSTEP determines the horizontal distance between points:\n  var XSTEP = (MaxX - MinX) / Width;\n\n  var first = true;\n\n  Ctx.beginPath();\n  var y = 0;\n  for (var x = MinX; x <= MaxX; x += XSTEP) {\n    y = f(x);\n    if (first) {\n      Ctx.moveTo(XC(x), YC(y));\n      first = false;\n    } else {\n      Ctx.lineTo(XC(x), YC(y));\n    }\n  }\n  Ctx.stroke();\n}\n\nfunction Shade(f, v, i) {\n  var row = Math.floor(i / 3);\n  var col = i % 3;\n\n  var b = 0;\n  if (col == 0) {\n    b = v;\n  } else if (col == 1) {\n    b = v + (MaxX - v) / 2;\n  } else {\n    b = v / 2;\n  }\n\n  if (row == 0) {\n    // social surplus: v * x(b)\n    var y = f(b);\n    Ctx.beginPath();\n    Ctx.moveTo(XC(0), YC(0));\n    Ctx.lineTo(XC(v), YC(0));\n    Ctx.lineTo(XC(v), YC(y));\n    Ctx.lineTo(XC(0), YC(y));\n    Ctx.lineTo(XC(0), YC(0));\n    Ctx.fillStyle = \"blue\";\n  } else if (row == 1) {\n    // p(v) = area above curve, from 0 to b\n    var XSTEP = (MaxX - MinX) / Width;\n    var first = true;\n    Ctx.beginPath();\n    var y = 0;\n    for (var x = MinX; x <= b; x += XSTEP) {\n      y = f(x);\n      if (first) {\n        Ctx.moveTo(XC(x), YC(y));\n        first = false;\n      } else {\n        Ctx.lineTo(XC(x), YC(y));\n      }\n    }\n    Ctx.lineTo(XC(0), YC(y));\n    Ctx.lineTo(XC(0), YC(0));\n    Ctx.fillStyle = \"red\";\n  } else {\n    // utility = ss - p\n    var limit = Math.min(b, v);\n\n    // part of utility is area under curve up to min(b, v)\n    var XSTEP = (MaxX - MinX) / Width;\n    var first = true;\n    Ctx.beginPath();\n    var y = 0;\n    for (var x = MinX; x <= limit; x += XSTEP) {\n      y = f(x);\n      if (first) {\n        Ctx.moveTo(XC(x), YC(y));\n        first = false;\n      } else {\n        Ctx.lineTo(XC(x), YC(y));\n      }\n    }\n    Ctx.lineTo(XC(x), YC(0));\n    Ctx.lineTo(XC(0), YC(0));\n    Ctx.fillStyle = \"green\";\n    Ctx.globalCompositeOperation = \"destination-over\";\n    Ctx.fill();\n\n    if (b < v) {\n      Ctx.beginPath();\n      Ctx.moveTo(XC(x), YC(0));\n      Ctx.lineTo(XC(x), YC(y));\n      Ctx.lineTo(XC(v), YC(y));\n      Ctx.lineTo(XC(v), YC(0));\n      Ctx.moveTo(XC(x), YC(0));\n    } else if (b > v) {\n      Ctx.beginPath();\n      Ctx.moveTo(XC(x), YC(y));\n      for (var x = x + XSTEP; x <= b; x += XSTEP) {\n        y = f(x);\n        Ctx.lineTo(XC(x), YC(y));\n      }\n      Ctx.lineTo(XC(v), YC(y));\n      Ctx.lineTo(XC(v), YC(f(v)));\n      Ctx.fillStyle = \"red\";\n    }\n  }\n  Ctx.globalCompositeOperation = \"destination-over\";\n  Ctx.fill();\n}\n\nfunction derivative(x) {\n  return b => {\n    var dz = (MaxX - MinX) / (Width * Width);\n    if (b == 0) return 0;\n    else return x(b) - x(b - dz);\n  };\n}\n\nfunction P(x) {\n  return b => {\n    //computes integral as a discrete sum with small dz value\n    var dz = (MaxX - MinX) / (Width * Width);\n    var sum = 0;\n    var dxdz = derivative(x);\n    for (var z = 0; z <= b; z += dz) {\n      sum += z * dxdz(z);\n    }\n    return sum;\n  };\n}\n\nfunction DrawPayment(x) {\n  if (Canvas.getContext) {\n    // Set up the canvas:\n    Ctx = Canvas.getContext(\"2d\");\n    Ctx.clearRect(0, 0, Width, Height);\n\n    // Get payment function from x\n    var F = P(x);\n\n    // Adjust MaxY\n    MaxY = F(MaxX);\n\n    // Draw:\n    DrawAxes();\n    RenderFunction(F);\n  } else {\n    console.log(\"ERROR NO CONTEXT\");\n    // Do nothing.\n  }\n}\n\nexport default class Myerson extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      v: MaxX / 2,\n      formValue: (MaxX / 2).toString()\n    };\n  }\n\n  componentDidMount() {\n    this.canvases = [\n      this.refs.canvas1,\n      this.refs.canvas2,\n      this.refs.canvas3,\n      this.refs.canvas4,\n      this.refs.canvas5,\n      this.refs.canvas6,\n      this.refs.canvas7,\n      this.refs.canvas8,\n      this.refs.canvas9\n    ];\n    this.plot = this.refs.plot;\n  }\n\n  handleChange = event => {\n    this.setState({ formValue: event.target.value });\n  };\n\n  handleSubmit = event => {\n    var n = Number(this.state.formValue);\n    if (n !== Number.NaN) {\n      this.setState(\n        {\n          v: n\n        },\n        () => this.draw(n)\n      );\n    }\n    event.preventDefault();\n  };\n\n  draw = v => {\n    // Draw:\n    var X = eval(this.refs.function_code.value);\n\n    for (var i = 0; i < this.canvases.length; i++) {\n      Canvas = this.canvases[i];\n      Width = Canvas.width;\n      Height = Canvas.height;\n      Draw(X, v, i);\n    }\n\n    Canvas = this.plot;\n    Width = Canvas.width;\n    Height = Canvas.height;\n    DrawPayment(X);\n  };\n\n  render() {\n    return (\n      <div>\n        <p>\n          Enter a monotone (non-decreasing!) allocation function using valid\n          Javascript Syntax:\n        </p>\n        <textarea ref=\"function_code\" rows=\"5\" cols=\"40\">\n          {\"(b) => {\\n  return b;\\n};\"}\n        </textarea>\n        <form onSubmit={this.handleSubmit}>\n          <p style={{ margin: 0 }}>Valuation v:</p>\n          <input\n            type=\"text\"\n            style={{ marginLeft: 10, marginRight: 10 }}\n            value={this.state.formValue}\n            onChange={this.handleChange}\n          ></input>\n          <input type=\"submit\" value=\"plot!\"></input>\n        </form>\n\n        <h2>Social Surplus = v * x(b)</h2>\n        <div id=\"output\">\n          <canvas ref=\"canvas1\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n\n          <canvas ref=\"canvas2\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n\n          <canvas ref=\"canvas3\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n        </div>\n\n        <h2>Payment = p(b)</h2>\n        <div id=\"output\">\n          <canvas ref=\"canvas4\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n          <canvas ref=\"canvas5\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n          <canvas ref=\"canvas6\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n        </div>\n\n        <h2>Utility = v * x(b) - p(b) = SS - P</h2>\n        <div id=\"output\">\n          <canvas ref=\"canvas7\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n\n          <canvas ref=\"canvas8\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n\n          <canvas ref=\"canvas9\">CANVAS NOT SUPPORTED IN THIS BROWSER!</canvas>\n        </div>\n\n        <br />\n        {/* <img src=></img> */}\n        <p>\n          <b>Plot of Payment Function</b>\n        </p>\n        <canvas ref=\"plot\" className=\"plot\">\n          CANVAS NOT SUPPORTED IN THIS BROWSER!\n        </canvas>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":""}